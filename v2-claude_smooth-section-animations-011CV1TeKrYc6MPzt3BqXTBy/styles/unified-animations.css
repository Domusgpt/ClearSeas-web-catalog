/**
 * Unified Animation System
 * A cohesive motion design language for all sections
 *
 * Core Principles:
 * 1. Consistent timing and easing across all animations
 * 2. Flowing, organic transitions that feel connected
 * 3. Layered reveals with depth and hierarchy
 * 4. Subtle parallax and particle effects that unify the experience
 * 5. Performance-optimized transforms and opacity changes
 *
 * © 2025 Clear Seas Solutions LLC
 */

/* ==================== ANIMATION CONSTANTS ==================== */
:root {
    /* Unified Timing System */
    --anim-duration-instant: 0.15s;
    --anim-duration-fast: 0.3s;
    --anim-duration-normal: 0.6s;
    --anim-duration-slow: 0.9s;
    --anim-duration-slower: 1.2s;
    --anim-duration-slowest: 1.8s;

    /* Unified Easing System - Smooth, organic curves */
    --anim-ease-entrance: cubic-bezier(0.16, 1, 0.3, 1);        /* Smooth enter */
    --anim-ease-exit: cubic-bezier(0.7, 0, 0.84, 0);            /* Smooth exit */
    --anim-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);           /* Material smooth */
    --anim-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);      /* Gentle bounce */
    --anim-ease-anticipate: cubic-bezier(0.6, -0.28, 0.735, 0.045); /* Pull back then go */

    /* Stagger Delays for Sequential Animations */
    --anim-stagger-xs: 0.05s;
    --anim-stagger-sm: 0.1s;
    --anim-stagger-md: 0.15s;
    --anim-stagger-lg: 0.2s;

    /* Transform Distances */
    --anim-translate-sm: 20px;
    --anim-translate-md: 40px;
    --anim-translate-lg: 60px;
    --anim-translate-xl: 100px;

    /* Particle & Flow Animation Colors */
    --flow-gradient-1: rgba(0, 212, 255, 0.15);
    --flow-gradient-2: rgba(192, 132, 252, 0.15);
    --flow-gradient-3: rgba(255, 0, 110, 0.15);
}

/* ==================== SECTION ENTRANCE SYSTEM ==================== */

/* All sections get smooth entrance by default - EXCEPT pinned sections */
section.section:not([data-section-pin]) {
    position: relative;
    overflow: hidden;
}

/* Section Reveal Observer - Applied by JS - ONLY for non-pinned sections */
/* HERO ALWAYS VISIBLE - it's the first thing users see */
section.hero {
    opacity: 1 !important;
}

/* Other non-pinned sections wait for reveal */
section.section:not([data-section-pin]):not(.is-revealed):not(#hero) {
    opacity: 0;
}

section.section:not([data-section-pin]).is-revealed {
    animation: sectionReveal var(--anim-duration-slow) var(--anim-ease-entrance) forwards;
}

/* Fallback: Show everything after 2 seconds if JS fails */
@keyframes emergencyReveal {
    to { opacity: 1; }
}

body.animations-ready section.section:not([data-section-pin]):not(.is-revealed) {
    animation: emergencyReveal 0.1s ease 2s forwards;
}

@keyframes sectionReveal {
    from {
        opacity: 0;
        transform: translateY(var(--anim-translate-md));
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==================== UNIFIED FLOW TRANSITIONS ==================== */

/* Flowing gradient wave between sections - DISABLED for now to prevent issues */
/* Can be re-enabled later once core animations work
section.section:not([data-section-pin]):not(.hero)::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    right: -100%;
    height: 1px;
    background: linear-gradient(
        90deg,
        transparent 0%,
        var(--flow-gradient-1) 25%,
        var(--flow-gradient-2) 50%,
        var(--flow-gradient-3) 75%,
        transparent 100%
    );
    opacity: 0;
    transition: opacity var(--anim-duration-normal) var(--anim-ease-smooth);
    z-index: 10;
}

section.section:not([data-section-pin]).is-revealed::before {
    animation: flowingBorder var(--anim-duration-slowest) var(--anim-ease-smooth) forwards;
}
*/

@keyframes flowingBorder {
    0% {
        opacity: 0;
        transform: translateX(-50%);
    }
    50% {
        opacity: 1;
    }
    100% {
        opacity: 0.6;
        transform: translateX(0);
    }
}

/* Flowing particle effects - DISABLED for now to prevent issues */
/* Can be re-enabled later once core animations work
section.section:not([data-section-pin]):not(.hero)::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 800px;
    height: 800px;
    background: radial-gradient(
        circle at center,
        var(--flow-gradient-1) 0%,
        var(--flow-gradient-2) 50%,
        transparent 100%
    );
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
    pointer-events: none;
    z-index: 0;
}

section.section:not([data-section-pin]).is-revealed::after {
    animation: particleBurst var(--anim-duration-slowest) var(--anim-ease-entrance) forwards;
}
*/

@keyframes particleBurst {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }
    50% {
        opacity: 0.3;
    }
    100% {
        transform: translate(-50%, -50%) scale(2);
        opacity: 0;
    }
}

/* ==================== CONTENT REVEAL SYSTEM ==================== */

/* Staggered content reveals - for non-pinned sections only */
/* Hero data-animate elements are ALWAYS visible */
section.hero [data-animate="reveal"] {
    opacity: 1 !important;
    transform: none !important;
}

/* Other sections wait for reveal */
section:not([data-section-pin]):not(.hero) [data-animate="reveal"] {
    opacity: 0;
    transform: translateY(var(--anim-translate-md));
    transition:
        opacity var(--anim-duration-normal) var(--anim-ease-entrance),
        transform var(--anim-duration-normal) var(--anim-ease-entrance);
    transition-delay: var(--reveal-delay, 0s);
}

section:not([data-section-pin]):not(.hero).is-revealed [data-animate="reveal"] {
    opacity: 1;
    transform: translateY(0);
}

/* Pinned sections keep their data-animate elements visible for GSAP */
section[data-section-pin] [data-animate="reveal"] {
    opacity: 1;
    transform: none;
}

/* Reveal delay variants */
[data-animate="reveal"][style*="--reveal-delay: 0.1s"] {
    transition-delay: 0.1s;
}

[data-animate="reveal"][style*="--reveal-delay: 0.15s"] {
    transition-delay: 0.15s;
}

[data-animate="reveal"][style*="--reveal-delay: 0.2s"] {
    transition-delay: 0.2s;
}

/* ==================== CARD ANIMATIONS ==================== */

/* Unified card entrance - ONLY for non-pinned sections */
/* Hero cards are ALWAYS visible */
section.hero .signal-card {
    opacity: 1 !important;
    transform: none !important;
}

/* Other section cards wait for reveal */
section:not([data-section-pin]):not(.hero) .signal-card,
section:not([data-section-pin]):not(.hero) .capability-card,
section:not([data-section-pin]):not(.hero) .step {
    opacity: 0;
    transform: translateY(var(--anim-translate-lg)) scale(0.95);
    transition:
        opacity var(--anim-duration-normal) var(--anim-ease-entrance),
        transform var(--anim-duration-normal) var(--anim-ease-entrance);
    transition-delay: var(--card-delay, 0s);
}

section:not([data-section-pin]):not(.hero).is-revealed .signal-card,
section:not([data-section-pin]):not(.hero).is-revealed .capability-card,
section:not([data-section-pin]):not(.hero).is-revealed .step {
    opacity: 1;
    transform: translateY(0) scale(1);
}

/* Pinned section cards remain visible for GSAP control */
section[data-section-pin] .carousel-card,
section[data-section-pin] .stat-card,
section[data-section-pin] .timeline-card,
section[data-section-pin] .featured-product {
    opacity: 1;
    transform: none;
}

/* Stagger card animations - ONLY for non-pinned sections */
section:not([data-section-pin]).is-revealed .signal-card:nth-child(1),
section:not([data-section-pin]).is-revealed .capability-card:nth-child(1),
section:not([data-section-pin]).is-revealed .step:nth-child(1),
section.hero.is-revealed .signal-card:nth-child(1) {
    transition-delay: 0s;
}

section:not([data-section-pin]).is-revealed .signal-card:nth-child(2),
section:not([data-section-pin]).is-revealed .capability-card:nth-child(2),
section:not([data-section-pin]).is-revealed .step:nth-child(2),
section.hero.is-revealed .signal-card:nth-child(2) {
    transition-delay: 0.1s;
}

section:not([data-section-pin]).is-revealed .signal-card:nth-child(3),
section:not([data-section-pin]).is-revealed .capability-card:nth-child(3),
section:not([data-section-pin]).is-revealed .step:nth-child(3),
section.hero.is-revealed .signal-card:nth-child(3) {
    transition-delay: 0.2s;
}

section:not([data-section-pin]).is-revealed .signal-card:nth-child(4),
section:not([data-section-pin]).is-revealed .capability-card:nth-child(4) {
    transition-delay: 0.3s;
}

/* Unified hover states - Smooth lift and glow - ALL cards get this */
.signal-card,
.capability-card,
.carousel-card,
.stat-card,
.timeline-card,
.step,
.featured-product {
    will-change: transform, box-shadow;
    transition:
        opacity var(--anim-duration-normal) var(--anim-ease-entrance),
        transform var(--anim-duration-fast) var(--anim-ease-smooth),
        box-shadow var(--anim-duration-fast) var(--anim-ease-smooth),
        border-color var(--anim-duration-fast) var(--anim-ease-smooth);
}

.signal-card:hover,
.capability-card:hover,
.carousel-card:hover,
.stat-card:hover,
.timeline-card:hover,
.step:hover,
.featured-product:hover {
    transform: translateY(-8px) scale(1.02);
    transition-duration: var(--anim-duration-fast);
}

/* ==================== HERO SECTION ANIMATIONS ==================== */

.hero-text {
    opacity: 0;
    transform: translateY(var(--anim-translate-lg));
}

.hero.is-revealed .hero-text {
    animation: heroTextReveal var(--anim-duration-slow) var(--anim-ease-entrance) forwards;
}

@keyframes heroTextReveal {
    0% {
        opacity: 0;
        transform: translateY(var(--anim-translate-lg));
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero-panels {
    opacity: 0;
    transform: translateX(var(--anim-translate-lg));
}

.hero.is-revealed .hero-panels {
    animation: heroPanelsReveal var(--anim-duration-slow) var(--anim-ease-entrance) 0.2s forwards;
}

@keyframes heroPanelsReveal {
    0% {
        opacity: 0;
        transform: translateX(var(--anim-translate-lg));
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ==================== SECTION-SPECIFIC ENHANCEMENTS ==================== */

/* Capabilities Grid - Cascade entrance */
.capabilities-grid {
    display: grid;
    gap: var(--space-6);
}

/* Products Section - Enhanced carousel entrance */
.product-carousel {
    opacity: 0;
    transform: translateX(-var(--anim-translate-xl));
}

section.is-revealed .product-carousel {
    animation: carouselSlideIn var(--anim-duration-slow) var(--anim-ease-entrance) 0.4s forwards;
}

@keyframes carouselSlideIn {
    0% {
        opacity: 0;
        transform: translateX(-var(--anim-translate-xl));
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Timeline - Progressive reveal with line draw */
.timeline-line {
    transform: scaleY(0);
    transform-origin: top center;
}

section.is-revealed .timeline-line {
    animation: timelineLineDraw var(--anim-duration-slowest) var(--anim-ease-smooth) forwards;
}

@keyframes timelineLineDraw {
    0% {
        transform: scaleY(0);
        opacity: 0;
    }
    100% {
        transform: scaleY(1);
        opacity: 1;
    }
}

/* Timeline dots pulse in */
.timeline-dot {
    transform: scale(0);
    opacity: 0;
}

section.is-revealed .timeline-dot {
    animation: dotPulseIn var(--anim-duration-fast) var(--anim-ease-bounce) forwards;
    animation-delay: calc(0.3s + var(--dot-index, 0) * 0.15s);
}

@keyframes dotPulseIn {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.3);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* ==================== ENGAGEMENT STEPS ANIMATION ==================== */

.engagement-steps {
    display: flex;
    gap: var(--space-6);
    flex-wrap: wrap;
}

.step {
    flex: 1;
    min-width: 280px;
}

/* Steps slide in from different directions for visual interest */
.step:nth-child(1) {
    transform: translateX(-var(--anim-translate-lg)) translateY(var(--anim-translate-md));
}

.step:nth-child(2) {
    transform: translateY(var(--anim-translate-lg));
}

.step:nth-child(3) {
    transform: translateX(var(--anim-translate-lg)) translateY(var(--anim-translate-md));
}

/* ==================== LEGACY SECTION ANIMATION ==================== */

.legacy-grid {
    display: grid;
    gap: var(--space-8);
}

.legacy-text {
    opacity: 0;
    transform: translateX(-var(--anim-translate-md));
}

.legacy-signal {
    opacity: 0;
    transform: translateX(var(--anim-translate-md));
}

section.is-revealed .legacy-text {
    animation: slideInFromLeft var(--anim-duration-normal) var(--anim-ease-entrance) 0.2s forwards;
}

section.is-revealed .legacy-signal {
    animation: slideInFromRight var(--anim-duration-normal) var(--anim-ease-entrance) 0.4s forwards;
}

@keyframes slideInFromLeft {
    0% {
        opacity: 0;
        transform: translateX(-var(--anim-translate-md));
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideInFromRight {
    0% {
        opacity: 0;
        transform: translateX(var(--anim-translate-md));
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ==================== CONTACT SECTION ENHANCEMENTS ==================== */

.contact-immersive {
    opacity: 0;
}

section.is-revealed .contact-immersive {
    animation: contactFadeIn var(--anim-duration-slow) var(--anim-ease-entrance) forwards;
}

@keyframes contactFadeIn {
    0% {
        opacity: 0;
        transform: scale(0.95);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.contact-cta-group {
    opacity: 0;
    transform: translateY(var(--anim-translate-md));
}

section.is-revealed .contact-cta-group {
    animation: ctaGroupReveal var(--anim-duration-normal) var(--anim-ease-bounce) 0.4s forwards;
}

@keyframes ctaGroupReveal {
    0% {
        opacity: 0;
        transform: translateY(var(--anim-translate-md));
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==================== BUTTON ANIMATIONS ==================== */

.btn,
.contact-primary-btn,
.contact-secondary-btn {
    position: relative;
    overflow: hidden;
}

/* Flowing gradient on hover */
.btn::before,
.contact-primary-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.3),
        transparent
    );
    transition: left var(--anim-duration-slow) var(--anim-ease-smooth);
    pointer-events: none;
}

.btn:hover::before,
.contact-primary-btn:hover::before {
    left: 100%;
}

/* ==================== SCROLL-TRIGGERED PARALLAX ==================== */

/* Subtle parallax on background elements */
[data-parallax] {
    will-change: transform;
    transition: transform 0.5s linear;
}

/* Parallax rates coordinated with scroll system */
[data-parallax="slow"] {
    --parallax-rate: 0.3;
}

[data-parallax="medium"] {
    --parallax-rate: 0.5;
}

[data-parallax="fast"] {
    --parallax-rate: 0.8;
}

/* ==================== LOADING & PERFORMANCE ==================== */

/* Prevent FOUC - Flash of Unstyled Content */
/* But ensure hero and pinned sections are ALWAYS visible */
body:not(.animations-ready) section.section:not(.hero):not([data-section-pin]) {
    opacity: 0;
}

/* Hero is always visible */
body:not(.animations-ready) section.hero,
body.animations-ready section.hero {
    opacity: 1 !important;
}

/* Pinned sections always visible */
body:not(.animations-ready) section[data-section-pin],
body.animations-ready section[data-section-pin] {
    opacity: 1 !important;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    section.section::before,
    section.section::after {
        display: none !important;
    }

    [data-animate="reveal"],
    .signal-card,
    .capability-card,
    .carousel-card,
    .stat-card,
    .timeline-card,
    .step,
    .featured-product {
        opacity: 1 !important;
        transform: none !important;
    }
}

/* ==================== PINNED SECTION OVERRIDES ==================== */

/* Pinned sections are ALWAYS visible - GSAP handles their animations */
section[data-section-pin] {
    opacity: 1 !important;
    overflow: visible !important;
}

/* Pinned sections don't get pseudo-element animations */
section[data-section-pin]::before,
section[data-section-pin]::after {
    display: none !important;
}

/* Title splash gets enhanced animation */
[data-section-title] {
    transform-origin: center center;
}

/* ==================== MICRO-INTERACTIONS ==================== */

/* Smooth scale on active elements */
.btn:active,
.contact-primary-btn:active,
.contact-secondary-btn:active {
    transform: translateY(-2px) scale(0.98);
    transition-duration: var(--anim-duration-instant);
}

/* Card active state */
.signal-card:active,
.capability-card:active,
.carousel-card:active {
    transform: translateY(-6px) scale(1);
}

/* Social link hover with rotation */
.social-link {
    transition:
        transform var(--anim-duration-fast) var(--anim-ease-smooth),
        background var(--anim-duration-fast) var(--anim-ease-smooth),
        border-color var(--anim-duration-fast) var(--anim-ease-smooth),
        color var(--anim-duration-fast) var(--anim-ease-smooth);
}

.social-link:hover {
    animation: socialPulse var(--anim-duration-slow) var(--anim-ease-smooth) infinite;
}

@keyframes socialPulse {
    0%, 100% {
        transform: translateY(-4px) scale(1.1) rotate(0deg);
    }
    50% {
        transform: translateY(-6px) scale(1.15) rotate(5deg);
    }
}

/* ==================== GLOBAL FLOW ANIMATION ==================== */

/* Subtle flowing gradient across entire viewport */
@keyframes globalFlow {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        linear-gradient(
            135deg,
            transparent 0%,
            var(--flow-gradient-1) 25%,
            var(--flow-gradient-2) 50%,
            var(--flow-gradient-3) 75%,
            transparent 100%
        );
    background-size: 400% 400%;
    animation: globalFlow 20s var(--anim-ease-smooth) infinite;
    pointer-events: none;
    z-index: 0;
    opacity: 0.5;
}

/**
 * A Paul Phillips Manifestation
 * © 2025 Clear Seas Solutions LLC - All Rights Reserved
 */
